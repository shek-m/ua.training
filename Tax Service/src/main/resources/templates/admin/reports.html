<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:tiles="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <title>Login</title>
</head>
<body>
<nav class="navbar navbar-expand-xxl navbar-dark bg-danger">
    <div class="container-fluid">
        <a class="navbar-brand">[[#{usermain.taxservice}]]</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
            <div class="navbar-nav">
                <a class="nav-link" aria-current="page" href="/user/home">[[#{usermain.home}]]</a>
                <a class="nav-link" href="#">[[#{adminMain.allbutton}]]</a>
                <a class="nav-link" th:href="@{#}">[[#{adminMain.statistics}]]</a>
                <a class="nav-link" th:href="@{#}">[[#{adminMain.users}]]</a>
                <a class="nav-link" th:href="@{/logout}">[[#{usermain.logout}]]</a>
            </div>
        </div>
    </div>
    <form class="d-inline-flex me-5" th:action="@{/admin/page/{id}(id=${currentPage})}" th:method="post" th:object="${dto}">
        <select class="form-control-sm me-2" th:field="*{reportType}" id="status">
            <option value="">[[#{user.reportpage.filterstatus}]]</option>
            <option th:each="type : ${T(com.example.taxservice.entity.enums.ReportType).values()}"
                    th:value="${type}"
                    th:text="${type.getLocaleName(loc)}">
            </option>
        </select>
        &nbsp;
        <input type="number" placeholder="User ID" th:field="*{userid}">
        <button class="btn btn-outline-light" type="submit">Ok</button>
    </form>

        <div>
            <div class="d-flex me-2">
                <div class="btn-group" role="group" aria-label="Basic outlined example">
                    <a class="btn btn-outline-light" th:href="@{'/admin/page/' + ${currentPage} + '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir} + '&lang=en'}" role="button">EN</a>
                    <a class="btn btn-outline-light" th:href="@{'/admin/page/' + ${currentPage} + '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir} + '&lang=uk'}" role="button">UK</a>
                </div>
            </div>
        </div>
</nav>
<div class="container-fluid text-center">
    <div><h1>List of reports</h1></div>
    <div>
        <div>
            <table class="table table-bordered">
                <thead class="table-light">
                <tr>
                    <th>
                        <a th:href="@{'/admin/page/' + ${currentPage} + '?sortField=id&sortDir=' + ${reverseSortDir}}">ID</a>
                    </th>
                    <th>
                        <a th:href="@{'/admin/page/' + ${currentPage} + '?sortField=reportType&sortDir=' + ${reverseSortDir}}">Report type</a>
                    </th>
                    <th>User ID</th>
                    <th>
                        <a th:href="@{'/admin/page/' + ${currentPage} + '?sortField=companyName&sortDir=' + ${reverseSortDir}}">Company name</a>
                    </th>
                    <th>Company ID</th>
                    <th>
                        <a th:href="@{'/admin/page/' + ${currentPage} + '?sortField=city&sortDir=' + ${reverseSortDir}}">City</a>
                    </th>
                    <th>
                        <a th:href="@{'/admin/page/' + ${currentPage} + '?sortField=date&sortDir=' + ${reverseSortDir}}">Date</a>
                    </th>
                    <th>Legal Entity Type</th>
                    <th>Currency</th>
                    <th>Current Assets</th>
                    <th>Non current Assets</th>
                    <th>Total assets </th>
                    <th>Current liabilities </th>
                    <th>Non-Current liabilities </th>
                    <th>Total liabilities </th>
                    <th>Equality </th>
                    <th>Status</th>
                    <th>Comment</th>
                </tr>
                </thead>
                <tbody>
                <th:block th:each="report : ${reports}">
                    <tr>
                        <td>[[${report.id}]]</td>
                        <td>[[${report.reportType}]]</td>
                        <td>[[${report.user.id}]]</td>
                        <td>[[${report.companyName}]]</td>
                        <td>[[${report.companyId}]]</td>
                        <td>[[${report.city}]]</td>
                        <td>[[${#temporals.format(report.date, 'dd.MM.yyyy')}]]</td>
                        <td>[[${report.legalEntityType}]]</td>
                        <td>[[${report.currency}]]</td>
                        <td>[[${report.currentAssets}]]</td>
                        <td>[[${report.nonCurrentAssets}]]</td>
                        <td>[[${report.totalAssets}]]</td>
                        <td>[[${report.currentLiabilities}]]</td>
                        <td>[[${report.nonCurrentLiabilities}]]</td>
                        <td>[[${report.totalLiabilities}]]</td>
                        <td>[[${report.equality}]]</td>
                        <td>[[${report.reportStatus}]]</td>
                        <td>[[${report.comment}]]</td>
                        <td>
                            <a class="btn btn-outline-dark" style=" margin-right: 3px" th:href="@{/admin/reports/{id}(id=${report.id})}">Review</a>
                        </td>
                    </tr>
                </th:block>
                </tbody>
            </table>
        </div>
    </div>
    <div>
        Total items: [[${totalItems}]].
        &nbsp; Pages:
        <span th:each="i: ${#numbers.sequence(1, totalPages)}">
            <a th:if="${currentPage != i}" th:href="@{'/admin/page/' + ${i} + '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir}}">[[${i}]]</a>
            <span th:unless="${currentPage != i}">[[${i}]]</span>
                &nbsp;
        </span>
        <a th:if="${currentPage > 1}" th:href="@{'/admin/page/' + ${currentPage - 1} + '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir}}">Previous</a>
        <span th:unless="${currentPage > 1}">Previous</span>
        <a th:if="${currentPage < totalPages}" th:href="@{'/admin/page/' + ${currentPage + 1} + '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir}}">Next</a>
        <span th:unless="${currentPage < totalPages}">Next</span>
    </div>
</div>
</body>
</html>